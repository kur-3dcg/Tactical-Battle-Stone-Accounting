# 戦術対抗戦石割収支集計ツール

ゲームの戦術対抗戦における石の収支を自動計算・管理するWebアプリケーションです。

## 📋 目次

- [特徴](#特徴)
- [使い方](#使い方)
- [機能詳細](#機能詳細)
- [データ管理](#データ管理)
- [技術仕様](#技術仕様)

## ✨ 特徴

- 📊 **自動計算**: 最終順位と割った石の数から収支を自動計算
- 💾 **ローカル保存**: ブラウザのローカルストレージに自動保存
- 📈 **グラフ表示**: 累計収支を視覚的にグラフで確認
- 📁 **CSV入出力**: データのエクスポート・インポートに対応
- 📱 **レスポンシブ**: スマホ・タブレット・PCで使用可能

## 📖 使い方

### 基本的な使い方

1. **日付**: デフォルトで今日の日付が入力されています（変更可能）
2. **最終順位**: 戦術対抗戦の最終順位を入力
3. **割った石の数**: 使用した石の回数を入力（デフォルト: 0）
4. **追加ボタン**: クリックするとデータが保存されます

### データの編集・削除

- **編集**: データベースの各行にある ✏️ ボタンをクリック
- **削除**: データベースの各行にある 🗑️ ボタンをクリック
- **編集中**: 入力フォームの背景が黄色に変わります

### 月ごとの表示

データベースの上部にある月タブをクリックすると、その月のデータのみを表示できます。

## 🎯 機能詳細

### 順位別報酬石

| 順位 | 報酬石 |
|------|--------|
| 1位 | 45個 |
| 2位 | 40個 |
| 3～10位 | 35個 |
| 11～100位 | 30個 |
| 101～200位 | 25個 |
| 201～500位 | 20個 |
| 501～1000位 | 18個 |
| 1001～2000位 | 16個 |
| 2001～4000位 | 14個 |
| 4001～8000位 | 12個 |
| 8001～15000位 | 10個 |

### 消費石の計算

```
消費石 = 割った回数 × 60個
```

### 収支の計算

```
収支 = 報酬石 - 消費石
```

## 📊 グラフ機能

### 表示期間の選択

- **7日**: 基準日から過去7日間
- **14日**: 基準日から過去14日間
- **1ヶ月**: 基準日から過去30日間
- **3ヶ月**: 基準日から過去90日間
- **6ヶ月**: 基準日から過去180日間

### 基準日の設定

1. **基準日フィールド**: カレンダーから任意の日付を選択
2. **最新ボタン**: 今日の日付に戻す

### グラフの見方

- **累計収支**: 選択した期間における累計の石の増減
- **緑のライン**: プラス収支（石が増えている）
- **下向きのライン**: マイナス収支（石が減っている）

## 💾 データ管理

### 自動保存

データを追加・編集・削除すると、自動的にブラウザのローカルストレージに保存されます。

### CSVエクスポート

1. 「📥 CSVエクスポート」ボタンをクリック
2. `戦術対抗戦データ_YYYY-MM-DD.csv` がダウンロードされます
3. Excelやスプレッドシートで開けます

### CSVインポート

1. 「📤 CSVインポート」ボタンをクリック
2. CSVファイルを選択
3. 既存のデータは上書きされます（事前にエクスポート推奨）

### CSVフォーマット

```csv
日付,最終順位,報酬石,割った石,消費石,収支
2025-10-21,50,30,0,0,30
2025-10-20,120,30,1,60,-30
```

**注意**: 報酬石・消費石・収支が空の場合、自動的に再計算されます。

### CSVテンプレートサンプルデータ
[Season9順位変動スプレッドシート](https://docs.google.com/spreadsheets/d/1-i3GjqiCD13kqjpN0t4L84KG1picqgVydREWthV51Xc/edit?usp=sharing)

### データ再計算

「🔄 データ再計算」ボタンをクリックすると、日付・順位・割った石の数から全データの報酬石・消費石・収支を再計算します。

## 🔧 技術仕様

### 使用技術

- **HTML5**: 基本構造
- **JavaScript (Vanilla)**: ロジック実装
- **Tailwind CSS (CDN)**: スタイリング
- **Chart.js (CDN)**: グラフ描画
- **LocalStorage API**: データ永続化

### ブラウザ対応

- Chrome（推奨）
- Firefox
- Safari
- Edge

### データ保存先

ブラウザのローカルストレージ（`localStorage`）に以下のキーで保存されます：

- `pvpStoneData`: 全データ（JSON形式）
- `pvpLastRank`: 最後に入力した順位

## ⚠️ 注意事項

### データの保存について

- データはブラウザごとに個別に保存されます
- ブラウザのキャッシュをクリアするとデータが消える可能性があります
- 定期的にCSVエクスポートでバックアップを取ることを推奨します

### 同じ日付のデータ

同じ日付には1つのデータしか保存できません。同じ日付のデータを追加しようとすると「編集からデータを変更してください」というエラーが表示されます。

### 複数デバイスでの使用

データはブラウザのローカルストレージに保存されるため、デバイス間での自動同期はされません。CSVエクスポート・インポートで同期してください。

## 📝 更新履歴

### Version 1.0.0
- 初回リリース
- 基本的なデータ入力・編集・削除機能
- CSV入出力機能
- グラフ表示機能
- ローカルストレージ対応
- 日付選択式グラフ表示範囲
- データ再計算機能

## 🤝 貢献

バグ報告や機能要望は、twitter(X)、youtube動画にお願いします  
[twitter(X)](https://x.com/kur_3dcg)  
[youtube](https://www.youtube.com/@kur_3dcg)  

---

**作成日**: 2025年10月21日  
**バージョン**: 1.0.0
